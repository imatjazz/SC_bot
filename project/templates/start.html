{% extends "layout.html" %}
{% set active_page = 'start' %}

{% block style %}
<link href="{{ url_for('static', filename='css/start.css' ) }}" rel="stylesheet" type="text/css">
{% endblock %}

{% block content %}
<div id="chat-wrapper" class="main col-md-4 col-lg-4 col-sm-12">
	<div id="chat-title-wrapper" class="col-sm-12 col-md-12 col-lg-12">
		<h4 id="chat-title">Chat</h4>
	</div>
	<div id="chat-message-wrapper" class="col-sm-12 col-md-12 col-lg-12">
		{% for m in messages %}
		<div class="chat-message {{m.who}}">{{m.message}}</div>
		{% endfor %}
	</div>
	<div id="chat-button-wrapper" class="col-sm-12 col-md-12 col-lg-12">
		{% for b in buttons %}
		<div class="chat-message chat-button">{{b}}</div>
		{% endfor %}
	</div>
	<div id="chat-input-wrapper" class="col-sm-12 col-md-12 col-lg-12">
		<input type="text" id="chat-input" placeholder="Send a message..." />
		<button id="chat-submit-btn" class="btn btn-default"><i class="fa fa-paper-plane"></i></button>
	</div>
</div>
<div id="additional-wrapper" class="main col-md-8 col-lg-8 col-sm-12">
	<div id="breadcrumb-wrapper" class="row">
		<ul class="custom-breadcrumb">
			{% for crumb in breadcrumbs %}
				{% if loop.index == breadcrumb_current[0] %}
					{% for subcrumb in crumb.sub %}
						<li class="sub-crumb 
						{% if loop.index < breadcrumb_current[1] %}sub-done-crumb
						{% elif loop.index == breadcrumb_current[1] %}sub-in-progress-crumb
						{% elif loop.index % 2 == 0 %}sub-not-started-even-crumb
						{% else %}sub-not-started-odd-crumb{% endif %}
						"><a>{{ subcrumb.name }}</a></li>
					{% endfor %}
				{% else %}
					<li class="crumb 
					{% if loop.index < breadcrumb_current[0] %}done-crumb
					{% elif loop.index == breadcrumb_current[0] %}in-progress-crumb
					{% elif loop.index % 2 == 0 %}not-started-even-crumb
					{% else %}not-started-odd-crumb{% endif %}
					"><a>{{ crumb.name }} {% if loop.index < breadcrumb_current[0] %}<i class="fa fa-check fa-green"></i>{% endif %}</a></li>
				{% endif %}
			{% endfor %}
		</ul>
	</div>
	<div id="tile-wrapper" class="row">
		{% for tile in tiles %}
		<div class="tile col-sm-12 col-md-12 col-lg-12">
			<h4 class="tile-title">{{tile.title}}</h4>
			<div class="tile-body">{{tile.body | safe}}</div>
		</div>
		{% endfor %}
	</div>
</div>
{% endblock %}

{% block js %}
<script>
var messageSendURL = "{{ url_for('message') }}";
var breadcrumbs = {{ breadcrumbs | safe }};
</script>
<script type="text/javascript" src="{{ url_for('static', filename='js/start.js') }}"></script>
{% endblock %}

